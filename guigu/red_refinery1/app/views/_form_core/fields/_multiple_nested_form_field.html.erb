<div class="form-group nested_form_field row">
  <%= f.label field.name, field.label, class: 'col-sm-2 col-form-label' %>
  <div class="col-sm-10">
  <%= tag.div id: field.name, class: "form-group collection" do %>
    <%= f.fields_for field.name do |ff| %>
      <%= render "_form_core/fields/nested_form", f: ff, field: field, form: field.nested_form, nesting: false %>
    <% end %>

    <% if field.access_read_and_write? %>
      <%= link_to_add_association "Add", f, field.name,
                                  class: "btn btn-link btn-sm",
                                  partial: "_form_core/fields/nested_form",
                                  render_options: {
                                    locals: {field: field, form: field.nested_form, nesting: true}
                                  } %>
    <% end %>
  <% end %>
  <% if field.hint.present? %>
    <span class="form-text text-muted">
      <%= field.hint %>
    </span>
  <% end %>
</div>
</div>
